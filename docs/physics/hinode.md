---
sidebar_position: 3
---

# 本サイトの日の出・日の入り時刻の計算方法

本サイトでは [トップページ](https://kacchan-next.vercel.app/) に、東京の日の出・日の入り時刻の概算値を掲載しています。これはアルゴリズムによって実際に数値計算して得た値です。その計算過程を本ページで紹介します。

:::warning[Warning]

実際の日の出・日の入りの時刻は [国立天文台のサイト](https://eco.mtk.nao.ac.jp/koyomi/dni/) に掲載されています。このサイトでは概算値を計算しているので、実際の値から数分〜10分程度ずれていることがあります。あくまで参考までに。

また、[こちら](https://github.com/random776/kacchan_next/blob/main/src/app/Basic/hinode.tsx)に、実際に計算しているソースコードを掲載しています。

:::

## 赤緯の計算

地球は太陽の周りを楕円運動（公転）していますが、地球の自転軸が傾いているため、自転面は公転面に対して23.4度（0.408ラジアン）程度傾いています。これによって太陽光線と地球赤道面とのなす角が約1年周期で変化するため、日本では四季が生じます。この角度を赤緯 $\delta$ で表します。$\delta \hspace{3pt}\rm{[rad]}$ は正弦関数で表すことができ、

$$
 \delta = -0.408 \cos \left(2 \pi \left(x + 0.025 \right)\right)
$$

とここでは計算しています。ただし、$x$は、1月1日を0、12月31日を1として1年のうちの経過率を0から1で表したものです。

## 太陽が見える時間の計算

『一般気象学』（小倉、1999）によると、$h = 15° \times $(地方時 - 12時間) と定義すると（地球は1時間に15° (0.26ラジアン）公転することに注意）、緯度 $\phi$ として、日の出・日の入り時の $h = h_0$ について

$$
    \cos h_0 = - \tan \phi \tan \delta
$$

と表せます。$h_0$ は（少なくとも白夜や極夜のある極域以外では）$-\pi \le h \le \pi$ で2つあるので、小さい方が日の出、大きい方が日の入りと対応する。こうして日の出から日の入りまでの時間数を求めることができます。

:::warning[Warning]

実際この式を適用したところうまくいかず、このサイトでは、

$$
    \cos h_0 = - \frac{\tan \delta}{\tan \phi}
$$

としたところ整合性が取れたのでこちらを採用しています。

:::

## 近時差などの考慮

仮に日の出から日の入りまでの時間数が$t$であるとして、南中時刻が正午であった場合、日の出時刻 $t_1$ 、日の入り時刻 $t_2$ は、

$$
    t_1 = 12 - \frac{t}{2} \hspace{20pt} t_2 = 12 + \frac{t}{2}
$$

と求められます。しかし、日本標準時の基準は東経135度であり、東京（東経140度）とは少しずれるので南中時刻も20分くらいずれます。また、地球軌道は厳密には楕円軌道なので、太陽の南中時刻は日によって変わること（近時差）というものを考える必要があります。均時差の説明は、[こちらの参考資料](https://www.nao.ac.jp/faq/a0107.html) に全て投げます。

:::info[sleep]

この記事を書いた人は途中で手抜きしたまま寝てしまいました。

:::

## 参考資料

- 小倉義光(1999).一般気象学（第2版補訂版）. 東京大学出版会.

- 国立天文台. 太陽の南中時刻は日によって変わるの？. [https://www.nao.ac.jp/faq/a0107.html](https://www.nao.ac.jp/faq/a0107.html) .